(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["js/index"],{9261:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("section",{staticClass:"dashboard-content"},[l("div",{staticClass:"form-section"},[l("div",{staticClass:"section-title"},[e._v("更新订单总表")]),l("div",{staticClass:"mt-m"},[l("span",{staticClass:"label",attrs:{type:"text"}},[e._v("导入订单")]),l("el-button",{attrs:{size:"small"},on:{click:function(t){e.$refs.upload.click()}}},[e._v("选择文件")]),e.file?l("span",{staticClass:"remark"},[e._v(e._s(e.file.name))]):e._e()],1),l("div",{staticClass:"mt-m"},[e.isLoaded?l("el-button",{attrs:{size:"small",type:"primary",disabled:!e.file},on:{click:e.uploadFile}},[e._v("确认导入")]):l("el-button",{attrs:{size:"small",loading:!0}},[e._v("导入中")]),l("span",{staticClass:"remark"},[e._v("新上传的订单如果以前上传过则以新上传的为准")])],1),l("input",{ref:"upload",attrs:{type:"file"},on:{change:e.chooseFile}})]),l("div",{staticClass:"form-section"},[l("div",{staticClass:"section-title mb-m"},[e._v("筛选订单")]),l("label",{staticClass:"filter-label"},[l("span",{staticClass:"label-content"},[e._v("订单ID")]),l("el-input",{model:{value:e.filter.id,callback:function(t){e.$set(e.filter,"id",t)},expression:"filter.id"}})],1),l("label",{staticClass:"filter-label"},[l("span",{staticClass:"label-content"},[e._v("下单时间")]),l("el-date-picker",{attrs:{type:"daterange"},model:{value:e.filter.date,callback:function(t){e.$set(e.filter,"date",t)},expression:"filter.date"}})],1),l("label",{staticClass:"filter-label"},[l("span",{staticClass:"label-content"},[e._v("姓名")]),l("el-input",{model:{value:e.filter.name,callback:function(t){e.$set(e.filter,"name",t)},expression:"filter.name"}})],1),l("label",{staticClass:"filter-label"},[l("span",{staticClass:"label-content"},[e._v("手机号码")]),l("el-input",{model:{value:e.filter.phone,callback:function(t){e.$set(e.filter,"phone",t)},expression:"filter.phone"}})],1),l("label",{staticClass:"filter-label"},[l("span",{staticClass:"label-content"},[e._v("订单状态")]),l("el-select",{attrs:{placeholder:""},model:{value:e.filter.status,callback:function(t){e.$set(e.filter,"status",t)},expression:"filter.status"}},[l("el-option",{attrs:{label:"全部",value:"1"}}),l("el-option",{attrs:{label:"待确认",value:"2"}}),l("el-option",{attrs:{label:"待发货",value:"3"}}),l("el-option",{attrs:{label:"已发货",value:"4"}}),l("el-option",{attrs:{label:"已签收",value:"5"}}),l("el-option",{attrs:{label:"已退货",value:"6"}})],1)],1),l("label",{staticClass:"filter-label"},[l("span",{staticClass:"label-content"},[e._v("快递公司")]),l("el-select",{attrs:{placeholder:""},model:{value:e.filter.express,callback:function(t){e.$set(e.filter,"express",t)},expression:"filter.express"}},[l("el-option",{attrs:{label:"全部",value:"1"}}),l("el-option",{attrs:{label:"德邦物流",value:"2"}}),l("el-option",{attrs:{label:"韵达快递",value:"3"}})],1)],1),l("div",{staticClass:"mt-m"},[l("el-button",{attrs:{size:"small",type:"primary"}},[e._v("筛选")]),l("span",{staticClass:"remark"},[e._v("共"+e._s(e.orders.length)+"个订单")])],1)]),l("el-table",{attrs:{height:"800",data:e.orders}},[l("el-table-column",{attrs:{prop:"订单ID",label:"订单ID"}}),l("el-table-column",{attrs:{prop:"订单状态",label:"订单状态"}}),l("el-table-column",{attrs:{prop:"姓名",label:"姓名"}}),l("el-table-column",{attrs:{prop:"手机号码",label:"手机号码"}}),l("el-table-column",{attrs:{prop:"下单时间",label:"下单时间"}}),l("el-table-column",{attrs:{prop:"省",label:"省份"}}),l("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isTrouble?l("el-button",{attrs:{plain:"",type:"danger",size:"small"},on:{click:function(l){e.trackTrouble(t.row)}}},[e._v("跟进")]):l("el-button",{attrs:{plain:"",type:"info",size:"small"},on:{click:function(l){e.tagTrouble(t.row)}}},[e._v("标记问题件")])]}}])})],1)],1)},s=[],i=l("be94"),n=l("1146"),r=l.n(n),o=l("2f62"),c={name:"Index",data:function(){return{filter:{id:"",name:"",phone:"",date:"",status:"全部",express:"全部"},file:null,tableData:[],isLoaded:!0}},computed:Object(i["a"])({},Object(o["c"])(["orders"])),methods:{chooseFile:function(e){this.file=e.target.files?e.target.files[0]:null},uploadFile:function(){var e=this,t=new FileReader;this.isLoaded=!1,t.onload=function(t){var l=r.a.read(t.target.result,{type:"binary",cellDates:!0,cellStyles:!0}),a=r.a.utils.sheet_to_json(l.Sheets[l.SheetNames[0]]);e.$http.post("/api/orders/upload",{orders:a}).then(function(t){var l=t.data;e.$store.dispatch("updateOrders",l),e.$nextTick(function(){e.$message({message:"导入成功",type:"success"}),e.file=null,e.isLoaded=!0})}).catch(function(){e.$message.error("服务器还未搞定")})},t.readAsBinaryString(this.file)},tagTrouble:function(e){this.$store.dispatch("tagTrouble",e["订单ID"])},trackTrouble:function(e){this.$router.push({name:"trouble-detail",params:{id:e["订单ID"]}})}}},u=c,p=l("2877"),b=Object(p["a"])(u,a,s,!1,null,null,null);b.options.__file="index.vue";t["default"]=b.exports},be94:function(e,t,l){"use strict";function a(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function s(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{},s=Object.keys(l);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(l).filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable}))),s.forEach(function(t){a(e,t,l[t])})}return e}l.d(t,"a",function(){return s})}}]);
//# sourceMappingURL=index.a3c7a5d3.js.map